{% extends 'layout/base.twig' %}

{% block title %}Post Management{% endblock %}

{% block content %}
<div class="glass-card" style="margin-top: 2rem;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h2 style="font-family: 'Outfit', sans-serif;">Post Management</h2>
        <div>
            <a href="/posts/feed" class="btn" style="background: var(--accent); margin-right: 1rem;" target="_blank">View Public Feed</a>
            <button hx-get="/posts/create" hx-target="#form-modal" class="btn" style="border: none; cursor: pointer; font-family: inherit; font-size: 0.9rem;">Add New Post</button>
        </div>
    </div>

    <table style="width: 100%; border-collapse: collapse; text-align: left;">
        <thead>
            <tr style="border-bottom: 1px solid var(--glass-border);">
                <th style="padding: 1rem;">ID</th>
                <th style="padding: 1rem;">Details</th>
                <th style="padding: 1rem;">Actions</th>
            </tr>
        </thead>
        <tbody id="post-table">
            {% for item in items %}
            <tr style="border-bottom: 1px solid var(--glass-border);">
                <td style="padding: 1rem; color: var(--text-muted);">{{ item.id }}</td>
                <td style="padding: 1rem;">{{ item.title | default('Item #' ~ item.id) }}</td>
                <td style="padding: 1rem;">
                    <button hx-get="/posts/{{ item.id }}/edit" hx-target="#form-modal" style="color: var(--primary); margin-right: 1rem; background: none; border: none; cursor: pointer; font-size: 1rem;">Edit</button>
                    <button hx-delete="/posts/{{ item.id }}" hx-target="closest tr" style="color: #ef4444; background: none; border: none; cursor: pointer;">Delete</button>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="3" style="padding: 2rem; text-align: center; color: var(--text-muted);">No items found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Modal Target -->
    <div id="form-modal" class="relative z-50"></div>
</div>
{% endblock %}
